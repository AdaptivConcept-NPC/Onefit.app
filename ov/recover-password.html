<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous" />
    <!--fontawesome-->
    <script src="https://kit.fontawesome.com/a2763a58b1.js"></script>

    <link rel="stylesheet" href="css/styles_depracated.css" />

    <title>onefit&trade; &copy; 2021 AdaptivConcept</title>

    <style>
      #recover-step-one {
        display: block;
      }
      #recover-step-two {
        display: none;
      }
    </style>
  </head>
  <body class="fitness-bg">
    <!--navigation modal-->
    <!-- Modal -->
    <div class="modal fade" id="navigationModal" tabindex="-1" aria-labelledby="navigationModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content content-panel-border-style fitness-bg" style="border-radius: 25px !important">
          <div class="modal-header border-0">
            <h5 class="modal-title text-center" id="navigationModalLabel" style="color: #ffa500">Navigation</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body pt-0">
            <hr class="bg-white m-0" />
            <ul class="list-group">
              <li class="list-group-item bg-transparent border-0 navigation-item" id="nav-to-home" style="cursor: pointer">Home</li>
              <li class="list-group-item bg-transparent border-0 navigation-item" id="nav-to-about" style="cursor: pointer">About Us</li>
              <li class="list-group-item bg-transparent border-0 navigation-item" id="nav-to-services" style="cursor: pointer">Services and Programs</li>
              <li class="list-group-item bg-transparent border-0 navigation-item" id="nav-to-contact" style="cursor: pointer">Contact Us</li>
              <li class="list-group-item bg-transparent border-0 navigation-item" id="nav-to-forgotpwd" style="cursor: pointer">Forgot password?</li>
            </ul>
          </div>
          <div class="modal-footer border-0">
            <button type="button" class="onefit-buttons-style p-4" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <nav class="navbar text-white sticky-top m-0" style="background: #333">
      <a class="navbar-brand align-items-center" href="#">
        <img src="media/assets/One-Symbol-Logo-Two-Tone.png" class="d-inline-block align-top" alt="onefit logo" style="height: 50px; width: auto" />
      </a>
      <h1 class="light-h-text">one<span style="color: #ffa500 !important">fit</span><span style="font-size: 10px">&trade;</span></h1>
      <button class="menu-toggle" type="button" data-toggle="modal" data-target="#navigationModal">
        <i class="fas fa-fingerprint m-4"></i>
      </button>
    </nav>

    <div class="container-fluid">
      <div class="row align-items-center">
        <div class="col-xl py-4">
          <div class="content-panel-border-style p-4 tunnel-bg text-center" style="border-radius: 25px">
            <img src="media/assets/One-Logo-Vertical.png" class="img-fluid my-4" alt="one fitness" style="max-height: 50vh" />
            <p class="my-4 text-center" style="color: #fff; font-size: 10px">Crafted by Adaptiv Concept (Media) &copy; 2021</p>
          </div>
        </div>
        <div class="col-xl py-4 text-center" style="max-height: 90vh; overflow-y: auto; overflow-x: hidden">
          <div class="content-panel-border-style registration-form tunnel-bg mb-4 shadow" style="width: 100%">
            <div id="recover-step-one">
              <form class="text-center px-4 pb-4 pt-0">
                <div class="output-container my-2" id="output-container"></div>
                <p>Please provide the email address you used to register your user account</p>
                <div class="form-group my-4">
                  <input type="text" id="email" placeholder="Provide us with your email address" />
                </div>
              </form>
              <div class="text-center">
                <button type="button" class="mb-4" id="recover-btn"><i class="fas fa-redo" style="color: #ffa500"></i> Reset my password</button>
              </div>
            </div>

            <div id="recover-step-two"></div>
          </div>
        </div>
      </div>
    </div>

    <script>
      var recoverbtn = document.getElementById("recover-btn");

      recoverbtn.addEventListener("click", recoverPassword);

      /*navToReg.addEventListener("click", function () {
        window.location.href = "registration/client-registration.php";
      });*/

      document.getElementById("output-container").addEventListener("click", function () {
        document.getElementById("output-container").innerHTML = "";
        document.getElementById("output-container").style.display = "none";
      });

      function recoverPassword() {
        var email = document.getElementById("email").value;
        var outputContainer = document.getElementById("output-container");

        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
          if (this.readyState == 4 && this.status == 200) {
            var output = this.responseText;

            if (output.startsWith("|[System Error]|")) {
              //an error has occured
              //alert(output);
              outputContainer.style.display = "block";
              outputContainer.innerHTML = output;
            } else {
              //hide #recover-step-one, show and populate #recover-step-two with a success message and provide a link to head back home
              document.getElementById("recover-step-one").style.display = "none";
              document.getElementById("recover-step-two").style.display = "block";
              document.getElementById("recover-step-two").innerHTML = `<h1>Recovery details have been sent to your email</h1><p>Head over to you email for the recovery link and other details and instructions.</p><button type="button" class="mb-4" id="back-btn" onclick(function(){window.location.href = 'index.html';})><i class="fas fa-home" style="color: #ffa500"></i> Go back to Home page</button>`;
            }
          }
        };
        xhttp.open("GET", "scripts/password-recovery.php?email=" + email, true);
        xhttp.send();
      }
    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
  </body>
</html>
